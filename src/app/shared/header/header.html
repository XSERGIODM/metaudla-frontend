<header class="relative z-[100] backdrop-blur-md bg-[hsl(var(--glass-bg)_/_0.8)] border-b border-[hsl(var(--glass-border))]">
  <nav class="container mx-auto px-6 py-4">
    <div class="flex items-center justify-between">
      <!-- Logo -->
      <a
        [routerLink]="menuOptions.at(0)?.ruta"
        class="flex items-center space-x-2">
        <img [src]="env.LOGO_APLICACION" alt="Logo" class="w-10 h-auto" >
        <span class="font-futuristic font-bold text-xl text-primary">{{env.NOMBRE_APLICACION}}</span>
      </a>

      <!-- Navigation Links -->
      <div class="hidden md:flex items-center space-x-8">
        @for (item of menuOptions; track item) {
          <a
            [routerLink]="item.ruta"
            routerLinkActive="border-b-2 border-primary"
            class="text-foreground hover:text-primary transition-colors duration-300 font-medium">
            {{ item.titulo}}
          </a>
        }
      </div>

      <!-- Auth Buttons - Mostrar segÃºn estado de autenticaciÃ³n -->
      <div class="flex items-center space-x-4">
        @if (!authService.isAuthenticated()) {
          <!-- Usuario NO autenticado - Mostrar Login -->
          <a
            routerLink="/login"
            routerLinkActive="border-b-2 border-primary"
            class="glass-card px-4 py-2 text-sm font-medium text-primary hover:text-primary-foreground hover:bg-primary transition-all duration-300">
            ğŸ” Login
          </a>
        } @else {
          <!-- Dentro del @else del usuario autenticado -->
          <div class="relative group">
            <button class="glass-card px-4 py-2 text-sm font-medium text-primary flex items-center space-x-2">
              <span>{{ authService.currentUser()?.nombre }}</span>
              <span>â–¼</span>
            </button>
          <!-- Dropdown menu -->
          <div class="absolute right-0 mt-0 w-48 glass-card hidden group-hover:block">
            <!-- Mis Islas - Para Profesores y Admins -->
            @if (authService.currentUser()?.rol === 'PROFESOR' || authService.currentUser()?.rol === 'ADMINISTRADOR') {
              <a routerLink="/mis-islas" class="block px-4 py-2 hover:bg-primary/10">
                ğŸï¸ Mis Islas
              </a>
            }

            <!-- Dashboard Admin - Solo para Admins -->
            @if (authService.currentUser()?.rol === 'ADMINISTRADOR') {
              <a routerLink="/dashboard-admin" class="block px-4 py-2 hover:bg-primary/10">
                ğŸ“Š Dashboard Admin
              </a>
            }

            <!-- Perfil - Para todos los usuarios logueados -->
            <a routerLink="/perfil" class="block px-4 py-2 hover:bg-primary/10">
              ğŸ‘¤ Mi Perfil
            </a>

            <button (click)="logout()" class="w-full text-left px-4 py-2 hover:bg-red-500/10 text-red-500">
              ğŸšª Cerrar SesiÃ³n
            </button>
          </div>
        </div>
        }
      </div>
    </div>
  </nav>
</header>
